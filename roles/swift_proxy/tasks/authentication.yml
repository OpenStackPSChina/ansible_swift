---

#
# Create service credentials and object storage service API endpoints
#

- name: Create swift service user
  keystone_user: user=swift tenant={{tenant_name}} password=123456


- name: Add admin role to the swift user
  keystone_user: role=admin user=swift tenant={{tenant_name}}


- name: Create the swift service entity
  command: /usr/bin/openstack service create --name swift --description "OpenStack Object Storage" object-store


- name: Create Object Storage service API endpoints
  keystone_service:
    endpoint: "{{ keystone_admin_url }}"
    token: "{{ keystone_admin_token }}"
    name: swift
    type: object-store
    description: "Object Storage Service"
    public_url: "{{ swift_public_url }}"
    internal_url: "{{ swift_internal_url }}"
    admin_url: "{{ swift_admin_url }}"

